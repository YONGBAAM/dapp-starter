(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{268:function(e,t,n){e.exports=n(581)},308:function(e,t){},311:function(e,t){},314:function(e,t){},318:function(e,t){},343:function(e,t){},345:function(e,t){},359:function(e,t){},361:function(e,t){},392:function(e,t){},394:function(e,t){},486:function(e,t){},487:function(e,t){},581:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(34),s=n.n(i),l=n(41),c=n(12),u=n.n(c),o=n(18),p=n(14),m=n(61),y=n(3),d=n(35),f=n(134),b=function(e){var t=e.children;return r.a.createElement(d.f,{h:"100vh"},r.a.createElement(d.b,{bg:"purple.200",p:4,justifyContent:"space-around",alignItems:"center"},r.a.createElement(d.a,null,r.a.createElement(d.g,{fontWeight:"bold"},"h662-Animals")),r.a.createElement(m.b,{to:"/"},r.a.createElement(f.a,{size:"sm",colorScheme:"blue"},"Main")),r.a.createElement(m.b,{to:"my-animal"},r.a.createElement(f.a,{size:"sm",colorScheme:"red"},"My Animal")),r.a.createElement(m.b,{to:"sale-animal"},r.a.createElement(f.a,{size:"sm",colorScheme:"green"},"Sale Animal")),r.a.createElement(m.b,{to:"inventory"},r.a.createElement(f.a,{size:"sm",colorScheme:"purple"},"Inventory"))),r.a.createElement(d.b,{direction:"column",h:"full",justifyContent:"center",alignItems:"center"},t))},T=n(146),v=n(70),h=n.n(v),k="http://3.35.14.61:8080",w=function(e){var t=e.itemId,n=e.nftId,i=e.ownerWalletAddress,s=e.nftDescription,l=e.account,c=Object(a.useState)(""),m=Object(p.a)(c,2),y=m[0],b=m[1],v=i,w=v.length>10?v.substring(0,4)+".."+v.substring(v.length-5,v.length):v,E=function(){var e=Object(o.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post(k+"/items/retrieve",{postId:t,password:y,address:l});case 3:n=e.sent,alert(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(d.b,{w:"full",h:"5vh",justifyContent:"left",alignItems:"center",direction:"row"},r.a.createElement(d.g,null,"id: ",t," nftId: ",n," w: ",w," ",s," "),r.a.createElement(T.b,null,r.a.createElement(T.a,{w:"10vh",type:"string",value:y,onChange:function(e){b(e.target.value)}}),r.a.createElement(T.c,{children:"password"})),r.a.createElement(f.a,{size:"sm",colorScheme:"blue",onClick:E},"retrieve"))},E=function(e){var t=e.account,n=Object(a.useState)([]),i=Object(p.a)(n,2),s=i[0],l=i[1],c=Object(a.useState)(),m=Object(p.a)(c,2),y=(m[0],m[1],function(){var e=Object(o.a)(u.a.mark(function e(){var n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(k+"/items/"+t);case 3:n=e.sent,a=[],n.data.map(function(e){a.push(e)}),l(a),console.log(n.data),console.log(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(){return e.apply(this,arguments)}}());return Object(a.useEffect)(function(){y()},[]),r.a.createElement(d.d,null,s&&s.map(function(e,n){return r.a.createElement(d.e,{key:n},r.a.createElement(w,{account:t,nftId:e.nftId,nftDescription:e.nftDescription,itemId:e.itemId,ownerWalletAddress:e.ownerWalletAddress}))}))},x=n(233),g=new(n.n(x).a)(window.ethereum),A=new g.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"animalTypes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_animalTokenOwner",type:"address"}],name:"getAnimalTokens",outputs:[{components:[{internalType:"uint256",name:"animalTokenId",type:"uint256"},{internalType:"uint256",name:"animalType",type:"uint256"},{internalType:"uint256",name:"animalPrice",type:"uint256"}],internalType:"struct MintAnimalToken.AnimalTokenData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintAnimalToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"saleAnimalToken",outputs:[{internalType:"contract SaleAnimalToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_saleAnimalToken",type:"address"}],name:"setSaleAnimalToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],"0x6e5FbcE03503044dd2C526e6D8CC9C32DDe1130A"),O=new g.eth.Contract([{inputs:[{internalType:"address",name:"_mintAnimalTokenAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"animalTokenPrices",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_animalTokenId",type:"uint256"}],name:"getAnimalTokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getOnSaleAnimalTokenArrayLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintAnimalTokenAddress",outputs:[{internalType:"contract MintAnimalToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"onSaleAnimalTokenArray",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_animalTokenId",type:"uint256"}],name:"purchaseAnimalToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_animalTokenId",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"setForSaleAnimalToken",outputs:[],stateMutability:"nonpayable",type:"function"}],"0x53973A79Fd14D914a08746C22a560d5ce9e784a2"),I=function(e){var t=e.animalType;return r.a.createElement(d.a,null,r.a.createElement(d.g,null,"type: ",t))},j=function(e){var t=e.account,n=Object(a.useState)(),i=Object(p.a)(n,2),s=i[0],l=i[1],c=function(){var e=Object(o.a)(u.a.mark(function e(){var n,a,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t||console.error("err"),e.next=4,A.methods.mintAnimalToken().send({from:t});case 4:if(n=e.sent,console.log(n),!n.status){e.next=18;break}return e.next=9,A.methods.balanceOf(t).call();case 9:return a=e.sent,e.next=12,A.methods.tokenOfOwnerByIndex(t,parseInt(a,10)-1).call();case 12:return r=e.sent,e.next=15,A.methods.animalTypes(parseInt(r,10)).call();case 15:i=e.sent,console.log(r+" // 0"+i),l(i);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}},e,null,[[0,20]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(d.b,{w:"full",h:"100vh",justifyContent:"center",alignItems:"center",direction:"column"},r.a.createElement(d.a,null,s?r.a.createElement("div",null,r.a.createElement(I,{animalType:s})):r.a.createElement("div",null,"Lets mint card")),"type: ".concat(s),r.a.createElement(d.a,null),r.a.createElement(f.a,{mt:4,size:"sm",colorScheme:"blue",onClick:c},"mint"))},S=function(e){var t=e.animalTokenId,n=e.animalType,i=e.animalPrice,s=e.saleStatus,l=e.account,c=Object(a.useState)(""),m=Object(p.a)(c,2),y=m[0],b=m[1],v=Object(a.useState)(""),w=Object(p.a)(v,2),E=w[0],x=w[1],j=Object(a.useState)(i),S=Object(p.a)(j,2),M=S[0],C=S[1],F=function(){var e=Object(o.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l&&s){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,O.methods.setForSaleAnimalToken(t,g.utils.toWei(y,"ether")).send({from:l});case 5:e.sent.status&&C(g.utils.toWei(y,"ether")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A.methods.safeTransferFrom(l,"0xc9B7F6CB9Ee166f4d113B5394A05E346048628d1",parseInt(t,10)).send({from:l}),e.next=4,h.a.post(k+"/items/deposit",{nftId:t,password:E,walletAddress:l,description:"test"});case 4:n=e.sent,console.log(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error;case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(d.a,{textAlign:"center",w:150},r.a.createElement(I,{animalType:n}),r.a.createElement(d.a,{mt:2},"0"===M?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.b,null,r.a.createElement(T.a,{type:"number",value:y,onChange:function(e){b(e.target.value)}}),r.a.createElement(T.c,{children:"Matic"})),r.a.createElement(f.a,{size:"sm",colorScheme:"green",mt:2,onClick:F,display:"inline-block"},"Sell"),r.a.createElement(T.b,null,r.a.createElement(T.a,{type:"string",value:E,onChange:function(e){x(e.target.value)}})),r.a.createElement(f.a,{size:"sm",colorScheme:"blue",mt:2,onClick:P,display:"inline-block"},"Deposit")):r.a.createElement(d.g,{d:"inline-block"},g.utils.fromWei(M)," Matic")))},M=function(e){var t=e.account,n=Object(a.useState)(),i=Object(p.a)(n,2),s=i[0],l=i[1],c=Object(a.useState)(!1),m=Object(p.a)(c,2),y=m[0],b=m[1],T=function(){var e=Object(o.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.methods.balanceOf(t).call();case 3:if("0"!==e.sent){e.next=6;break}return e.abrupt("return");case 6:return n=[],e.next=9,A.methods.getAnimalTokens(t).call();case 9:e.sent.map(function(e){n.push({animalTokenId:e.animalTokenId,animalType:e.animalType,animalPrice:e.animalPrice})}),l(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.methods.isApprovedForAll(t,"0x53973A79Fd14D914a08746C22a560d5ce9e784a2").call();case 3:(n=e.sent)&&b(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A.methods.setApprovalForAll("0x53973A79Fd14D914a08746C22a560d5ce9e784a2",!y).send({from:t});case 5:e.sent.status&&b(!y),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){t&&(v(),T())},[t]),Object(a.useEffect)(function(){console.log(s)},[s]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{alignItems:"center"},r.a.createElement(d.g,{display:"inline-block"},"Sale Status : ",y?"True":"False"),r.a.createElement(f.a,{size:"xs",ml:2,colorScheme:y?"red":"blue",onClick:h},y?"Cancel":"Approve")),r.a.createElement(d.c,{templateColumns:"repeat(4, 1fr)",gap:8,mt:4},s&&s.map(function(e,n){return r.a.createElement(S,{key:n,animalTokenId:e.animalTokenId,animalType:e.animalType,animalPrice:e.animalPrice,saleStatus:y,account:t})})))},C=function(e){var t=e.animalType,n=e.animalPrice,i=e.animalTokenId,s=e.account,l=e.getOnSaleAnimalTokens,c=Object(a.useState)(!1),m=Object(p.a)(c,2),y=m[0],b=m[1],T=function(){var e=Object(o.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.methods.ownerOf(i).call();case 3:t=e.sent,b(t.toLocaleLowerCase()===s.toLocaleLowerCase()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,O.methods.purchaseAnimalToken(i).send({from:s,value:n});case 5:e.sent.status&&l(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){T()},[]),r.a.createElement(d.a,{textAlign:"center",w:150},r.a.createElement(I,{animalType:t}),r.a.createElement(d.a,null,r.a.createElement(d.g,{d:"inline-block"},g.utils.fromWei(n)," Matic"),r.a.createElement(f.a,{size:"sm",colorScheme:"green",m:2,disabled:y,onClick:v},"Buy")))};var F=function(e){var t=e.account,n=Object(a.useState)(),i=Object(p.a)(n,2),s=i[0],l=i[1],c=function(){var e=Object(o.a)(u.a.mark(function e(){var t,n,a,r,i,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.methods.getOnSaleAnimalTokenArrayLength().call();case 3:t=e.sent,n=[],a=0;case 6:if(!(a<parseInt(t,10))){e.next=20;break}return e.next=9,O.methods.onSaleAnimalTokenArray(a).call();case 9:return r=e.sent,e.next=12,A.methods.animalTypes(r).call();case 12:return i=e.sent,e.next=15,O.methods.animalTokenPrices(r).call();case 15:s=e.sent,n.push({animalTokenId:r,animalType:i,animalPrice:s});case 17:a++,e.next=6;break;case 20:l(n),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.error(e.t0);case 26:case"end":return e.stop()}},e,null,[[0,23]])}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){c()},[]),Object(a.useEffect)(function(){console.log(s)},[s]),r.a.createElement(d.c,{mt:4,templateColumns:"repeat(4, 1fr)",gap:8},s&&s.map(function(e,n){return r.a.createElement(C,{key:n,animalType:e.animalType,animalPrice:e.animalPrice,animalTokenId:e.animalTokenId,getOnSaleAnimalTokens:c,account:t})}))},P=function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],i=t[1],s=function(){var e=Object(o.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.ethereum){e.next=8;break}return e.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:t=e.sent,i(t[0]),e.next=9;break;case 8:alert("Install Metamask");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){s()},[n]),r.a.createElement(m.a,null,r.a.createElement(b,null,r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/",element:r.a.createElement(j,{account:n})}),r.a.createElement(y.a,{path:"my-animal",element:r.a.createElement(M,{account:n})}),r.a.createElement(y.a,{path:"sale-animal",element:r.a.createElement(F,{account:n})}),r.a.createElement(y.a,{path:"inventory",element:r.a.createElement(E,{account:n})}))))},D=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,586)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)})};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(P,null))),document.getElementById("root")),D()}},[[268,3,2]]]);
//# sourceMappingURL=main.f007ff9d.chunk.js.map